generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// User

model User {
  id           String   @id @default(cuid())
  email        String   @unique
  name         String?
  passwordHash String
  createdAt    DateTime @default(now())
  brands       Brand[]
}

// Brand

model Brand {
  id          String            @id @default(cuid())
  userId      String
  name        String
  industry    String?
  summary     String?
  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt

  user        User              @relation(fields: [userId], references: [id])
  positioning BrandPositioning?
  story       BrandStory?
  visuals     VisualDirection?
  ux          BrandUX?
  messaging   BrandMessaging?
  social      SocialDirection?
  personas    Persona[]
  files       FileVault[]
}

// Positioning

model BrandPositioning {
  id          String  @id @default(cuid())
  brandId     String  @unique
  purpose     String?
  promise     String?
  positioning String?
  values      String?
  personality String?
  competitive String?

  brand       Brand   @relation(fields: [brandId], references: [id])
}

// Persona

model Persona {
  id           String   @id @default(cuid())
  brandId      String
  name         String
  category     String?
  bio          String?
  motivations  String?
  painPoints   String?
  triggers     String?
  needs        String?
  websiteFocus String?

  brand        Brand    @relation(fields: [brandId], references: [id])
}

// Messaging

model BrandMessaging {
  id            String   @id @default(cuid())
  brandId       String   @unique
  coreMessage   String?
  elevatorPitch String?
  taglines      String?   // JSON string
  valueProps    String?
  voiceMatrix   String?
  wordBankGood  String?
  wordBankBad   String?
  talkingPoints String?

  brand         Brand    @relation(fields: [brandId], references: [id])
}

// Story

model BrandStory {
  id             String   @id @default(cuid())
  brandId        String   @unique
  origin         String?
  mission        String?
  transformation String?
  differentiators String?
  narrativeArc   String?

  brand          Brand    @relation(fields: [brandId], references: [id])
}

// Visuals

model VisualDirection {
  id           String   @id @default(cuid())
  brandId      String   @unique
  colors       String?  // JSON
  typography   String?  // JSON
  moodboardUrl String?
  layoutNotes  String?
  styleNotes   String?

  brand        Brand    @relation(fields: [brandId], references: [id])
}

// UX

model BrandUX {
  id              String   @id @default(cuid())
  brandId         String   @unique
  homepageNotes   String?
  userFlows       String? // JSON
  wireframes      String?
  ctaStrategy     String?
  conversionRules String?

  brand           Brand    @relation(fields: [brandId], references: [id])
}

// Social

model SocialDirection {
  id              String   @id @default(cuid())
  brandId         String   @unique
  pillars         String?
  voiceGuidelines String?
  postFormats     String?
  carouselGuides  String?
  consistency     String?

  brand           Brand    @relation(fields: [brandId], references: [id])
}

// File Vault

model FileVault {
  id        String   @id @default(cuid())
  brandId   String
  url       String
  type      String
  label     String?
  createdAt DateTime @default(now())

  brand     Brand    @relation(fields: [brandId], references: [id])
}
